name: "CodeQL Config"

# Specify paths to exclude from analysis
paths-ignore:
  - 'node_modules/**'
  - 'tests/**'
  - 'public/**'  # Exclude vendored libraries (Bootstrap, jQuery)
  - '_data/**'

# Configure query filters
queries:
  - uses: security-extended

# Suppress known false positives
# Note: These are documented in SECURITY.md
query-filters:
  - exclude:
      id: js/missing-token-validation
      # Reason: CSRF protection is implemented via csrf-csrf library with
      # conditional test environment handling. The middleware is registered
      # at app.js:55-61 but CodeQL cannot track through the runtime conditional.
      # See SECURITY.md for implementation details.
  - exclude:
      id: js/sql-injection
      # Reason: Using Mongoose ORM which automatically sanitizes queries.
      # Additionally, express-mongo-sanitize middleware provides defense-in-depth.
      # CodeQL flags these as they use user input, but Mongoose prevents injection.
